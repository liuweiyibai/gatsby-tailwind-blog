---
title: 总结一下 vue 性能优化
---

## 简介

vue 项目在开发中可以做哪些性能优化相关的东西，本文基于 vue 框架层面和 webpack 工程化方面做一下总结

## 框架层面

1. 灵活使用 `v-if` 和 `v-show`

   `v-if` 是真正的条件渲染，因为它会确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建；也是惰性的：如果在初始渲染时条件为假，则什么也不做——直到条件第一次变为真时，才会开始渲染条件块。

   `v-show` 就简单得多， 不管初始条件是什么， 元素总是会被渲染， 并且只是简单地基于 CSS 的 display 属性进行切换。

   `v-if` 适用于在运行时很少改变条件，不需要频繁切换条件的场景；
   `v-show` 则适用于需要非常频繁切换条件的场景。

2. computed 和 watch 区分使用场景

   computed： 是计算属性，依赖其它属性值，并且 computed 的值有缓存，只有它依赖的属性值发生改变，下一次获取 computed 的值时才会重新计算 computed 的值；

   watch： 更多的是「观察」的作用，类似于某些数据的监听回调 ，每当监听的数据变化时都会执行回调进行后续操作；

   运用场景：

   当我们需要进行数值计算，并且依赖于其它数据时，应该使用 computed，因为可以利用 computed 的缓存特性，避免每次获取值时，都要重新计算；
   当我们需要在数据变化时执行异步或开销较大的操作时，应该使用 watch，使用 watch 选项允许我们执行异步操作 ( 访问一个 API )，限制我们执行该操作的频率，并在我们得到最终结果前，设置中间状态。这些都是计算属性无法做到的。

3. v-for 遍历必须为 item 添加 key，且避免同时使用 v-if

   1. v-for 遍历必须为 item 添加 key

      在列表数据进行遍历渲染时，需要为每一项 item 设置唯一 key 值，方便 Vue.js 内部机制精准找到该条列表数据。当 state 更新时，新的状态值和旧的状态值对比，较快地定位到 diff 。

   2. v-for 遍历避免同时使用 v-if

      v-for 比 v-if 优先级高，如果每一次都需要遍历整个数组，将会影响速度，尤其是当之需要渲染很小一部分的时候，必要情况下应该替换成 computed 属性。

4. Object.freeze
5. 组件中绑定事件，组件销毁时要把对应事件移除
6. 图片资源懒加载

7.

## 工程化方面

<https://juejin.cn/post/6940190960609394695>

<https://juejin.cn/post/6922641008106668045#heading-5>
