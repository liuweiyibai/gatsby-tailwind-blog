---
title: git 创建空分支
date: 2019-08-21 16:24:00
tags: ['git']
category:
  - 编程笔记
slug: git-create-empty-branch
thumbnail: '../../thumbnails/git.png'
---

## 概述

需要在 `git` 里面创建一个空分支，该分支不继承任何提交，没有父节点，完全是一个干净的分支，比如我们需要在某个分支里存放项目文档。

使用 `git checkout` 命令创建的分支是有父节点的，意味着新 `branch` 包含了历史提交，所以我们无法直接使用该命令。

## 解决方法

1. 检出分支

   ```bash
   # git checkout --orphan [branch name]
   git checkout --orphan v2.0
   ```

   该命令会生成一个叫 `v2.0` 的分支，该分支会包含父分支的所有文件。但新的分支不会指向任何以前的提交，就是它没有历史，如果你提交当前内容，那么这次提交就是这个分支的首次提交。

2. 删除所有文件

   我们想要空分支，所以我们需要把当前内容全部删除，用 `git` 命令

   ```bash
   git rm -rf .
   ```

3. 提交分支

   如果没有任何文件提交的话，分支是看不到的，所以我们需要创建一个新文件，然后提交则新创建的 `branch` 就会显示出来。

   ```bash
   echo '# new branch' >> README.md
   git add ./
   git commit -m 'new branch'
   git push origin v2.0 # 最后 push 到远程仓库，则新的空分支就创建成功了。
   ```
