---
title: è‡ªå®šä¹‰ vue æŒ‡ä»¤
tags:
  - vue
category:
  - ç¼–ç¨‹ç¬”è®°
slug: custom-vue-instructions
thumbnail: '../../thumbnails/vue.png'
date: 2019-07-20 09:23:22
---

åœ¨ `vue` ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œæ¥å¯¹ `dom` å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œï¼Œæˆ‘ä»¬é¡ºä¾¿å¤ä¹ ä¸‹å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ªæŒ‡ä»¤ï¼Œä¸»è¦åŒ…å« 5 ä¸ªé’©å­å‡½æ•°

## å¦‚ä½•å®šä¹‰

- å®šä¹‰æ–¹å¼

  - å…¨å±€å®šä¹‰

    ```js
    Vue.directive('focus', {
      // å½“è¢«ç»‘å®šçš„å…ƒç´ æ’å…¥åˆ° dom ä¸­æ—¶
      inserted: function (el) {
        // èšç„¦å…ƒç´ 
        el.focus()
      }
    })
    ```

  - å±€éƒ¨å®šä¹‰

    ```js
    directives:{
      focus:{
        inserted: function (el) {
          el.focus()
        }
      }
    }
    ```

- å®šä¹‰è¿‡ç¨‹ä¸­å¯ç”¨çš„é’©å­å‡½æ•°

  ```js
  bind :function(el, binding, vnode){
    // ğŸ“Œ ä¸€æ—¦æŒ‡ä»¤é™„åŠ åˆ°å…ƒç´ æ—¶è§¦å‘
    // åªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®
  }
  inserted :function(el, binding, vnode){
    // ä¸€æ—¦å…ƒç´ è¢«æ·»åŠ åˆ°çˆ¶å…ƒç´ æ—¶è§¦å‘
  }
  update :function(el, binding, vnode, oldVnode){
    // ğŸ“Œ æ¯å½“å…ƒç´ æœ¬èº«æ›´æ–°(ä½†æ˜¯å­å…ƒç´ è¿˜æœªæ›´æ–°)æ—¶è§¦å‘
  }
  componentUpdate :function(el, binding, vnode, oldVnode){
    // æ¯å½“ç»„ä»¶å’Œå­ç»„ä»¶è¢«æ›´æ–°æ—¶è§¦å‘
  }
  unbind :function(el, binding, vnode){
    // ğŸ“Œ ä¸€æ—¦æŒ‡ä»¤è¢«ç§»é™¤æ—¶è§¦å‘
  }
  ```

- é’©å­å‡½æ•°ä¸­çš„å‚æ•°éƒ½æ˜¯ä»€ä¹ˆ

  [å®˜æ–¹æ–‡æ¡£](https://cn.vuejs.org/v2/guide/custom-directive.html)

- è‡ªå®šä¹‰ä¸€ä¸ªæŒ‡ä»¤

  ```js
  Vue.directive('directiveName', {
    bind: function (el, binding, vnode) {
      // å½“æŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šå…ƒç´ elæ—¶è§¦å‘ï¼Œå¸¸ç”¨æ¥åšåˆå§‹åŒ–
    },
    update: function (el, binding, vnode) {
      // ç»‘å®š Vue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ Vnode æ›´æ–°æ—¶è°ƒç”¨
    },
    unbind: function (el, binding, vnode) {
      // è§£ç»‘æ“ä½œï¼Œç”¨æ¥å°†æŒ‡ä»¤å’Œå…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ï¼Œç±»ä¼¼vueç”Ÿå‘½å‘¨æœŸä¸­çš„beforeDestroyé’©å­å‡½æ•°
    }
  })

  // ç»™ç»‘å®šçš„å…ƒç´ é€šè¿‡v-styleæ·»åŠ æ ·å¼
  Vue.directive('style', {
    bind: function (el, binding) {
      el.style.position = 'fixed'
      el.style.top = binding.value.top + 'px'
      el.style.left = binding.value.left + 'px'
    }
  })
  ```

  å¦‚ä½•ä½¿ç”¨

  ```html
  <div class="header" v-style="{left:'20px',top:'20px'}">æˆ‘æ˜¯header</div>
  ```

## å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹æŒ‡ä»¤

[å¸¸ç”¨çš„ Vue è‡ªå®šä¹‰æŒ‡ä»¤é›†åˆ](/blog/common-vue-custom-command-set)
