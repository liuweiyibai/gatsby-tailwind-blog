---
title: html 文档加载事件
tags:
  - js
  - html
category:
  - 编程笔记
date: 2016-05-31 17:56:28
slug: dom-document-load-event
thumbnail: '../thumbnails/html5.png'
---

当初始的 `html` 文档被完全加载和解析完成之后， `DOMContentLoaded` 事件被触发，而无需等待样式表、图像和子框架的完成加载。另一个不同的事件 `load` 应该仅用于检测一个完全加载的页面。 在使用 `DOMContentLoaded` 更加合适的情况下使用 `load` 是一个令人难以置信的流行的错误，所以要谨慎。他们的区别是，触发的时机不一样，先触发 `DOMContentLoaded` 事件，后触发 `load` 事件。

## `DOM` 文档加载的顺序

1. 解析 `html` 结构。
2. 加载外部脚本和样式表文件。
3. 解析并执行脚本代码。
4. `DOM` 树构建完成。 发生 `DOMContentLoaded`
5. 加载图片等外部文件。
6. 页面加载完毕。 发生 `load`
7. 在第 4 步，会触发 `DOMContentLoaded` 事件。在第 6 步，触发 `load` 事件

## 应用

- 原生 `js`

  ```js
  // 不兼容老的浏览器
  document.addEventListener(
    'DOMContentLoaded',
    function () {
      // ...代码...
    },
    false
  );
  window.addEventListener(
    'load',
    function () {
      // ...代码...
    },
    false
  );
  ```

- `jQuery` 写法

  ```js
  // DOMContentLoaded
  $(document).ready(function () {
    // ...代码...
  });
  //load
  $(document).load(function () {
    // ...代码...
  });
  ```
