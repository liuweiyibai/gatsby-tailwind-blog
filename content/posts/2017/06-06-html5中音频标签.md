---
title: html5 中音频标签
tags:
  - html5
  - js
category:
  - 编程笔记
slug: audio-tag-in-html5
date: 2017-06-06 14:18:16
thumbnail: '../../thumbnails/html5.png'
---

用 `html5` 写聊天记录的时候，遇到判断音频是否播放完毕，业务要求是点击的时候，要加载一个闪烁的小喇叭 `gif` 图片，当播放结束的就应该自动的去除这个闪烁的动画。其实，我们只要用 `js` 获取到播放完毕的事件就可以了，通过这个事件去改变相应的样式。主要是要用到 `html5 audio` 标签的 `ended` 这个属性。

下面看怎么实现的吧。

- 我们这里假设，`class voice` 是静止的喇叭 `.className:voice1` 是闪烁的喇叭图

  ```html
  <div class="voice">
    <audio>
      <source src="地址" type="audio/aac" />
    </audio>
  </div>
  <script>
    $(document).on('click', '.voice', function () {
      $(this).addClass('voice1')
      $(this).find('audio').get(0).play()
      $(this)
        .find('audio')
        .bind('ended', function () {
          $('.voice').removeClass('voice1')
        })
    })
  </script>
  ```
